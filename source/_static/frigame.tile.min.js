!function(t){"use strict";t.PTilemap=Object.create(t.PSpriteGroup),t.extend(t.PTilemap,{init:function(e,i,a,n,s){var r,p,l,h,o,u,c=n||{},m=i.sizex,d=i.sizey,f=i.tileWidth,b=i.tileHeight,T=i.data,j=T.length,P=0,G=0,S=0,g=0;for(this.options?r=this.options:(r={},this.options=r),c.width=m*f,c.height=d*b,t.PSpriteGroup.init.call(this,e,c,s),u=0;j>u;u+=1)p=a[T[u]],p&&(l=Object.create(p),l.left=S,l.top=g,h=[e,P,G].join("_"),this.addSprite(h,l),p.createCallback&&(o=t.s[h],p.createCallback.call(o,o))),S+=f,G+=1,G>=m&&(G=0,S=0,P+=1,g+=b)}}),t.Tilemap=t.Maker(t.PTilemap),t.extend(t.PSpriteGroup,{addTilemap:function(e,i,a,n){var s=t.Tilemap(e,i,a,n,this.name);return this.layers.push({name:e,obj:s}),this.updateList.push({name:e,obj:s}),s},insertTilemap:function(e,i,a,n){var s=t.Tilemap(e,i,a,n,this.name);return this.layers.unshift({name:e,obj:s}),this.updateList.unshift({name:e,obj:s}),s}})}(friGame);