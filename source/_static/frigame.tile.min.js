(function(e,t){"use strict";t.PTilemap=Object.create(t.PSpriteGroup),e.extend(t.PTilemap,{init:function(e,i,a,r,n){var l,s,p,o,h,c,m=r||{},u=i.sizex,d=i.sizey,f=i.tileWidth,T=i.tileHeight,b=i.data,j=b.length,P=0,y=0,G=0,S=0;for(this.options?l=this.options:(l={},this.options=l),m.width=u*f,m.height=d*T,t.PSpriteGroup.init.call(this,e,m,n),c=0;j>c;c+=1)s=a[b[c]],s&&(p=Object.create(s),p.left=G,p.top=S,o=[e,P,y].join("_"),this.addSprite(o,p),s.createCallback&&(h=t.s[o],s.createCallback.call(h,h))),G+=f,y+=1,y>=u&&(y=0,G=0,P+=1,S+=T)}}),t.Tilemap=t.Maker(t.PTilemap),e.extend(t.PSpriteGroup,{addTilemap:function(e,i,a,r){var n=t.Tilemap(e,i,a,r,this.name);return this.layers.push({name:e,obj:n}),n},insertTilemap:function(e,i,a,r){var n=t.Tilemap(e,i,a,r,this.name);return this.layers.unshift({name:e,obj:n}),n}})})(jQuery,friGame);