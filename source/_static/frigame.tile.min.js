!function(e){"use strict";e.PTilemap=Object.create(e.PSpriteGroup),e.extend(e.PTilemap,{init:function(t,i,a,r,n){var s,l,p,h,c,o,m=r||{},u=i.sizex,d=i.sizey,f=i.tileWidth,T=i.tileHeight,b=i.data,P=b.length,k=0,j=0,G=0,S=0;for(this.options?s=this.options:(s={},this.options=s),m.width=u*f,m.height=d*T,e.PSpriteGroup.init.call(this,t,m,n),o=0;o<P;o+=1)(l=a[b[o]])&&((p=Object.create(l)).left=G,p.top=S,h=t+"_"+k+"_"+j,this.addSprite(h,p),l.createCallback&&(c=e.s[h],l.createCallback.call(c,c))),G+=f,(j+=1)>=u&&(j=0,G=0,k+=1,S+=T)}}),e.Tilemap=e.Maker(e.PTilemap),e.extend(e.PSpriteGroup,{addTilemap:function(t,i,a,r){var n=e.Tilemap(t,i,a,r,this.name);return this.layers.push({name:t,obj:n}),this.checkUpdate(),n},insertTilemap:function(t,i,a,r){var n=e.Tilemap(t,i,a,r,this.name);return this.layers.unshift({name:t,obj:n}),this.checkUpdate(),n}})}(friGame);